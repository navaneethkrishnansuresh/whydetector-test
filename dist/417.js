"use strict";(self.webpackChunkBrainDriveWhyDetector=self.webpackChunkBrainDriveWhyDetector||[]).push([[417],{417:(e,n,t)=>{t.r(n),t.d(n,{BrainDriveWhyDetector:()=>B,default:()=>Y,metadata:()=>F});var r=t(848),o=t(914),s=t.n(o),a=t(515),i=t(969),l=t(72),c=t.n(l),d=t(825),h=t.n(d),u=t(659),p=t.n(u),m=t(56),g=t.n(m),f=t(540),b=t.n(f),y=t(113),v=t.n(y),x=t(423),w={};w.styleTagTransform=v(),w.setAttributes=g(),w.insert=p().bind(null,"head"),w.domAPI=h(),w.insertStyleElement=b(),c()(x.A,w),x.A&&x.A.locals&&x.A.locals;var S=["intro","snapshot","energy_map","deep_stories","patterns","statement","action","completed"],k={intro:"Welcome",snapshot:"Quick Snapshot",energy_map:"Energy Mapping",deep_stories:"Deep Stories",patterns:"Patterns",statement:"Your Why",action:"Action Plan",completed:"Complete"},j=["suicide","kill myself","end my life","self-harm","hurt myself","want to die","no reason to live","better off dead"];function T(e){return void 0===e&&(e="msg"),"".concat(e,"_").concat(Date.now(),"_").concat(Math.random().toString(36).substring(2,9))}var N="I hear that you're going through something really difficult. Your feelings are valid.\n\nThis coaching session is designed for self-reflection, not crisis support. Please reach out to someone who can help:\n\n‚Ä¢ National Suicide Prevention Lifeline (US): 988\n‚Ä¢ Crisis Text Line: Text HOME to 741741\n‚Ä¢ International: https://www.iasp.info/resources/Crisis_Centres/\n\nWould you like to continue our session when you're feeling more settled?",I=function(){return I=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},I.apply(this,arguments)},C=function(e,n,t,r){return new(t||(t=Promise))(function(o,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(a,i)}l((r=r.apply(e,n||[])).next())})},_=function(e,n){var t,r,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=i(0),a.throw=i(1),a.return=i(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},W={ollama:"ollama_servers_settings",anthropic:"anthropic_api_settings",openai:"openai_api_settings",openrouter:"openrouter_api_settings"};function A(e){var n,t,r,o,s,a,i;return e?"string"==typeof e?e:(null===(r=null===(t=null===(n=e.choices)||void 0===n?void 0:n[0])||void 0===t?void 0:t.message)||void 0===r?void 0:r.content)?e.choices[0].message.content:(null===(a=null===(s=null===(o=e.choices)||void 0===o?void 0:o[0])||void 0===s?void 0:s.delta)||void 0===a?void 0:a.content)?e.choices[0].delta.content:(null===(i=e.message)||void 0===i?void 0:i.content)?e.message.content:e.response?e.response:e.content?"string"==typeof e.content?e.content:JSON.stringify(e.content):e.text?e.text:"":""}var z,P=function(){function e(e){this.currentUserId=null,this.services=e,this.initializeUserId()}return e.prototype.initializeUserId=function(){return C(this,void 0,void 0,function(){var e,n,t;return _(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),(null===(t=this.services)||void 0===t?void 0:t.api)?[4,this.services.api.get("/api/v1/auth/me")]:[3,2];case 1:(e=r.sent())&&e.id&&(this.currentUserId=e.id),r.label=2;case 2:return[3,4];case 3:return n=r.sent(),console.error("WhyDetector: Error getting user ID:",n),[3,4];case 4:return[2]}})})},e.prototype.getCurrentUserId=function(){return this.currentUserId},e.prototype.fetchModels=function(){return C(this,void 0,void 0,function(){var e,n,t,r,o;return _(this,function(s){switch(s.label){case 0:if(!(null===(r=this.services)||void 0===r?void 0:r.api))return console.error("WhyDetector: API service not available"),[2,[]];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.services.api.get("/api/v1/ai/providers/all-models")];case 2:return e=s.sent(),n=(null==e?void 0:e.models)||(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.models)||(Array.isArray(e)?e:[]),[2,Array.isArray(n)?n.map(function(e){var n=e.provider||"ollama";return{name:e.name||e.id||"",provider:n,providerId:W[n]||n,serverName:e.server_name||e.serverName||"Unknown Server",serverId:e.server_id||e.serverId||"unknown"}}):[]];case 3:return t=s.sent(),console.error("WhyDetector: Error fetching models:",t),[2,[]];case 4:return[2]}})})},e.prototype.checkForCrisisContent=function(e){var n=e.toLowerCase();return j.some(function(e){return n.includes(e)})},e.prototype.sendToCoach=function(e,n,t,r,o,s,a){return C(this,void 0,void 0,function(){var i,l,c,d,h,u,p,m;return _(this,function(g){switch(g.label){case 0:if(!(null===(m=this.services)||void 0===m?void 0:m.api))throw new Error("API service not available");if(this.checkForCrisisContent(e))return s(N),[2,N];i=function(e,n,t,r){var o=[];o.push({role:"system",content:'You are a warm, empathetic "Find Your Why" coach helping someone discover their core purpose.\n\n## Your Role\n- Guide users through structured self-reflection\n- Ask thoughtful follow-up questions\n- Acknowledge feelings before asking questions\n- Synthesize patterns from their stories\n- Help formulate their Why statement\n\n## Conversation Style\n- Warm and encouraging, never clinical\n- Use simple, conversational language\n- Acknowledge emotions: "That sounds meaningful..."\n- Build on responses: "You mentioned X, tell me more..."\n- Ask ONE question at a time\n\n## Phase Guidelines\n\n### INTRO (Phase 1)\n- Welcome warmly\n- Explain this is self-reflection, not therapy\n- Set expectations for the journey\n\n### SNAPSHOT (Phase 2)\nAsk about:\n- Current work/role\n- What they like about it\n- What frustrates them\n- One thing they\'d change\n\n### ENERGY MAP (Phase 3)\nExplore:\n- Times they felt energized, time flew by\n- Times they felt drained, watching the clock\n- Go deeper: "What specifically made that moment good/bad?"\n- Get at least 3 energizers and 3 drainers\n\n### DEEP STORIES (Phase 4)\nAsk about:\n- A time they felt proud\n- A time they helped someone that stayed with them\n- Use [Acknowledge] + [Build] + [Question] pattern\n- Periodically synthesize: "So what I\'m hearing is..."\n\n### PATTERNS (Phase 5)\n- Identify recurring themes\n- Share observations: "I keep seeing patterns like..."\n- Check with user: "Does this feel true?"\n- Refine based on feedback\n\n### STATEMENT (Phase 6)\n- Propose a Why: "To ___ so that ___"\n- It\'s a draft, not holy text\n- Refine based on user feedback\n\n### ACTION (Phase 7)\n- Discuss how to apply the Why\n- Suggest practical next steps\n- Celebrate their journey\n\n## Safety Rules\n- You are NOT a therapist\n- Never diagnose or use clinical language\n- If user shows distress, suggest professional help\n- Keep focus on self-reflection and purpose'});var s=function(e,n){switch(e){case"intro":return"Start with a warm welcome. This is the beginning of our conversation.";case"snapshot":return"We're gathering a quick snapshot of who they are today. Ask about:\n- What they currently do (work/life)\n- What they enjoy about it\n- What frustrates them\n- What they'd change if they could";case"energy_map":var t=n.energizers.length,r=n.drainers.length;return"We're mapping their energy. Current progress:\n- Energizers found: ".concat(t,"/3 minimum\n- Drainers found: ").concat(r,"/3 minimum\n\nAsk about specific times they felt energized or drained. Go deeper on each one.");case"deep_stories":var o=n.stories.length;return"We're exploring meaningful stories. Stories collected: ".concat(o,"\n\nAsk about:\n- Times they felt proud\n- Times they helped someone that stayed with them\n- What values showed up in those moments\n\nUse the [Acknowledge] + [Build] + [Question] pattern.");case"patterns":return"Time to identify patterns. We have:\n- Energizers: ".concat(n.energizers.join(", ")||"none yet","\n- Drainers: ").concat(n.drainers.join(", ")||"none yet","\n- Patterns noted: ").concat(n.patterns.join(", ")||"none yet","\n\nShare the themes you see. Check if they resonate with the user.");case"statement":return"Time to formulate their Why statement.\nCurrent draft: ".concat(n.whyStatement||"Not yet created",'\n\nPropose a "To ___ so that ___" statement based on the patterns.\nBe open to refinement.');case"action":return"Wrap up the session positively.\nTheir Why: ".concat(n.whyStatement||"To be finalized","\n\nDiscuss how they can apply this Why in daily life and decisions.\nCelebrate their journey.");default:return""}}(e,n);s&&o.push({role:"system",content:"[Current Phase: ".concat(e.toUpperCase(),"]\n").concat(s)});for(var a=0,i=t.slice(-20);a<i.length;a++){var l=i[a];o.push({role:"coach"===l.role?"assistant":"user",content:l.content})}return r&&"START_SESSION"!==r&&o.push({role:"user",content:r}),o}(n,t,r,e),l="/api/v1/ai/providers/chat",c={provider:o.provider||"ollama",settings_id:o.providerId||"ollama_servers_settings",server_id:o.serverId,model:o.name,messages:i.map(function(e){return{role:e.role,content:e.content}}),params:{temperature:.7,max_tokens:2048},stream:!0,user_id:this.currentUserId||"current",conversation_type:"whydetector"},d="",g.label=1;case 1:return g.trys.push([1,6,,7]),"function"!=typeof this.services.api.postStreaming?[3,3]:[4,this.services.api.postStreaming(l,c,function(e){try{if(null==a?void 0:a.signal.aborted)return;var n=e;if(e.startsWith("data: ")&&(n=e.substring(6)),!n.trim()||"[DONE]"===n.trim())return;var t=A(JSON.parse(n));t&&(d+=t,s(t))}catch(e){}},{timeout:12e4,signal:null==a?void 0:a.signal})];case 2:return g.sent(),[3,5];case 3:return[4,this.services.api.post(l,I(I({},c),{stream:!1}),{timeout:6e4})];case 4:h=g.sent(),(u=A(h.data||h))&&(d=u,s(u)),g.label=5;case 5:return[2,d];case 6:if((p=g.sent())instanceof Error&&"AbortError"===p.name)throw p;throw console.error("WhyDetector: Coach error:",p),p;case 7:return[2]}})})},e}(),D=(z=function(e,n){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},z(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}z(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),E=function(){return E=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},E.apply(this,arguments)},M=function(e,n,t,r){return new(t||(t=Promise))(function(o,s){function a(e){try{l(r.next(e))}catch(e){s(e)}}function i(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(a,i)}l((r=r.apply(e,n||[])).next())})},O=function(e,n){var t,r,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=i(0),a.throw=i(1),a.return=i(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(s=0)),s;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((o=(o=s.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=n.call(e,s)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},L=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,s=n.length;o<s;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},R={energizers:[],drainers:[],stories:[],patterns:[],whyStatement:"",snapshot:null},U=function(e){function n(n){var t=e.call(this,n)||this;return t.aiService=null,t.abortController=null,t.themeChangeListener=null,t.handleStartSession=function(){return M(t,void 0,void 0,function(){var e,n,t;return O(this,function(r){switch(r.label){case 0:return e=this.state,n=e.selectedModel,t=e.models,!n&&t.length>0&&this.setState({selectedModel:t[0]}),n||0!==t.length?(this.setState({sessionStarted:!0,currentPhase:"intro",messages:[],sessionData:E({},R)}),[4,this.sendCoachMessage("START_SESSION")]):(this.setState({error:"No AI model available. Please configure a model provider."}),[2]);case 1:return r.sent(),[2]}})})},t.sendCoachMessage=function(e){return M(t,void 0,void 0,function(){var n,t,r,o,s,a,i,l,c,d,h=this;return O(this,function(u){switch(u.label){case 0:if(n=this.state,t=n.selectedModel,r=n.currentPhase,o=n.sessionData,s=n.messages,!this.aiService||!t)return this.setState({error:"No model selected"}),[2];if("START_SESSION"!==e&&(a={id:T("msg"),sender:"user",content:e,timestamp:(new Date).toISOString(),phase:r},this.setState(function(e){return{messages:L(L([],e.messages,!0),[a],!1)}})),i=T("msg"),l={id:i,sender:"coach",content:"START_SESSION"===e?"üëã Welcome to your Why Discovery session!\n\nI'm here to help you uncover what truly drives and energizes you - your personal \"Why.\"\n\n**Important:** This is a self-reflection tool, not therapy or mental health treatment. We'll explore your experiences together through conversation.\n\n**What to expect:**\n‚Ä¢ We'll talk about your current situation\n‚Ä¢ Explore what gives you energy vs. what drains you\n‚Ä¢ Dive into meaningful stories from your life\n‚Ä¢ Identify patterns that reveal your authentic self\n‚Ä¢ Craft your personal Why statement\n\nThis typically takes 30-60 minutes. Ready to begin?":"",timestamp:(new Date).toISOString(),isStreaming:"START_SESSION"!==e,phase:r},this.setState(function(n){return{messages:L(L([],n.messages,!0),[l],!1),isLoading:!0,isStreaming:"START_SESSION"!==e,inputText:""}}),"START_SESSION"===e)return this.setState({isLoading:!1}),[2];this.abortController=new AbortController,u.label=1;case 1:return u.trys.push([1,3,,4]),c=s.map(function(e){return{role:"user"===e.sender?"user":"coach",content:e.content}}),[4,this.aiService.sendToCoach(e,r,o,c,t,function(e){h.setState(function(n){return{messages:n.messages.map(function(n){return n.id===i?E(E({},n),{content:n.content+e}):n})}})},this.abortController)];case 2:return u.sent(),this.setState(function(e){return{messages:e.messages.map(function(e){return e.id===i?E(E({},e),{isStreaming:!1}):e}),isLoading:!1,isStreaming:!1}}),this.analyzeAndUpdatePhase(e),[3,4];case 3:return(d=u.sent())instanceof Error&&"AbortError"===d.name?this.setState(function(e){return{messages:e.messages.map(function(e){return e.id===i?E(E({},e),{isStreaming:!1,content:e.content+" [Stopped]"}):e}),isLoading:!1,isStreaming:!1}}):(console.error("WhyDetector: Error:",d),this.setState({error:"Error: ".concat(d instanceof Error?d.message:"Unknown error"),isLoading:!1,isStreaming:!1})),[3,4];case 4:return[2]}})})},t.handleSendMessage=function(){var e=t.state,n=e.inputText,r=e.isLoading;n.trim()&&!r&&t.sendCoachMessage(n.trim())},t.handleKeyPress=function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),t.handleSendMessage())},t.handleStopGeneration=function(){t.abortController&&t.abortController.abort()},t.handleModelSelect=function(e){t.setState({selectedModel:e})},t.dismissError=function(){t.setState({error:""})},t.chatEndRef=s().createRef(),t.inputRef=s().createRef(),t.state={messages:[],inputText:"",isLoading:!1,error:"",currentTheme:"light",selectedModel:null,models:[],isLoadingModels:!0,isStreaming:!1,isInitializing:!0,sessionStarted:!1,currentPhase:"intro",sessionData:E({},R),showPhaseIndicator:!0},t}return D(n,e),n.prototype.componentDidMount=function(){return M(this,void 0,void 0,function(){return O(this,function(e){switch(e.label){case 0:return console.log("WhyDetector: componentDidMount"),this.aiService=new P(this.props.services),this.initializeTheme(),[4,this.loadModels()];case 1:return e.sent(),this.setState({isInitializing:!1}),[2]}})})},n.prototype.componentWillUnmount=function(){var e;this.themeChangeListener&&(null===(e=this.props.services)||void 0===e?void 0:e.theme)&&this.props.services.theme.removeThemeChangeListener(this.themeChangeListener),this.abortController&&this.abortController.abort()},n.prototype.componentDidUpdate=function(e,n){this.state.messages.length!==n.messages.length&&this.scrollToBottom()},n.prototype.initializeTheme=function(){var e,n=this;if(null===(e=this.props.services)||void 0===e?void 0:e.theme){var t=this.props.services.theme.getCurrentTheme();this.setState({currentTheme:t}),this.themeChangeListener=function(e){n.setState({currentTheme:e})},this.props.services.theme.addThemeChangeListener(this.themeChangeListener)}},n.prototype.loadModels=function(){return M(this,void 0,void 0,function(){var e,n;return O(this,function(t){switch(t.label){case 0:if(console.log("WhyDetector: Loading models..."),!this.aiService)return this.setState({isLoadingModels:!1,error:"Service not initialized"}),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.aiService.fetchModels()];case 2:return e=t.sent(),console.log("WhyDetector: Models loaded:",e.length),this.setState({models:e,selectedModel:e.length>0?e[0]:null,isLoadingModels:!1,error:0===e.length?"No AI models available. Please configure a model provider.":""}),[3,4];case 3:return n=t.sent(),console.error("WhyDetector: Error loading models:",n),this.setState({isLoadingModels:!1,error:"Failed to load AI models"}),[3,4];case 4:return[2]}})})},n.prototype.scrollToBottom=function(){var e;null===(e=this.chatEndRef.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},n.prototype.analyzeAndUpdatePhase=function(e){var n=this.state,t=n.currentPhase,r=n.sessionData,o=n.messages.filter(function(e){return e.phase===t}).length,s=e.toLowerCase(),a=t,i=E({},r);"energy_map"===t&&((s.includes("energiz")||s.includes("love")||s.includes("enjoy"))&&(i.energizers=L(L([],r.energizers,!0),[e.substring(0,100)],!1)),(s.includes("drain")||s.includes("hate")||s.includes("frustrat"))&&(i.drainers=L(L([],r.drainers,!0),[e.substring(0,100)],!1))),"deep_stories"===t&&e.length>50&&(i.stories=L(L([],r.stories,!0),[e.substring(0,100)],!1)),S.indexOf(t),"intro"===t&&o>=2?a="snapshot":"snapshot"===t&&o>=4?a="energy_map":"energy_map"===t&&i.energizers.length>=2&&i.drainers.length>=2?a="deep_stories":"deep_stories"===t&&i.stories.length>=2?a="patterns":"patterns"===t&&o>=4?a="statement":"statement"===t&&o>=3?a="action":"action"===t&&o>=3&&(a="completed"),a===t&&i===r||this.setState({currentPhase:a,sessionData:i})},n.prototype.renderWelcomeScreen=function(){var e=this.state,n=e.models,t=e.isLoadingModels,o=e.error,s=(e.selectedModel,n.length>0);return(0,r.jsx)("div",{className:"welcome-screen",children:(0,r.jsxs)("div",{className:"welcome-content",children:[(0,r.jsx)("div",{className:"welcome-icon",children:"üß≠"}),(0,r.jsx)("h2",{children:"Discover Your Why"}),(0,r.jsx)("p",{className:"welcome-subtitle",children:"A guided journey to understand what truly drives you"}),(0,r.jsxs)("div",{className:"welcome-description",children:[(0,r.jsx)("p",{children:'This is a structured self-reflection session designed to help you uncover your personal "Why" - the core purpose that energizes and motivates you.'}),(0,r.jsx)("p",{children:"Through conversation, we'll explore what gives you energy, what drains you, and the patterns that reveal your authentic self."})]}),(0,r.jsxs)("div",{className:"welcome-disclaimer",children:[(0,r.jsx)("span",{children:"‚ÑπÔ∏è"}),(0,r.jsx)("span",{children:"This is not therapy or mental health treatment. It's a self-discovery tool for reflection and clarity."})]}),o&&(0,r.jsxs)("div",{className:"welcome-error",children:[(0,r.jsx)("span",{children:"‚ö†Ô∏è"}),(0,r.jsx)("span",{children:o})]}),!s&&!t&&(0,r.jsxs)("div",{className:"welcome-warning",children:[(0,r.jsx)("span",{children:"‚ö†Ô∏è"}),(0,r.jsx)("span",{children:"No AI models available. Please configure a model provider (like Ollama) in BrainDrive settings first."})]}),(0,r.jsx)("button",{className:"start-btn",onClick:this.handleStartSession,disabled:t||!s,children:t?"Loading models...":"Find My Why"}),(0,r.jsx)("div",{className:"welcome-time",children:"‚è±Ô∏è Typically 30-60 minutes for a complete session"})]})})},n.prototype.renderHeader=function(){var e=this,n=this.state,t=(n.models,n.selectedModel),o=n.isLoadingModels,a=(n.currentPhase,s().useState(!1));return a[0],a[1],(0,r.jsxs)("div",{className:"why-detector-header",children:[(0,r.jsxs)("div",{className:"header-left",children:[(0,r.jsx)("span",{className:"header-title",children:"üß≠ Why Discovery"}),this.renderPhaseIndicator()]}),(0,r.jsx)("div",{className:"header-right",children:(0,r.jsx)("div",{className:"model-selector",children:(0,r.jsxs)("button",{className:"model-selector-btn",onClick:function(){return e.setState(function(e){return E({},e)})},disabled:o,children:[(0,r.jsx)("span",{className:"model-name",children:(null==t?void 0:t.name)||"Select model"}),(0,r.jsx)("span",{children:"‚ñº"})]})})})]})},n.prototype.renderPhaseIndicator=function(){var e=this.state.currentPhase,n=S.indexOf(e);return(0,r.jsxs)("div",{className:"phase-indicator",children:[S.slice(0,-1).map(function(e,t){return(0,r.jsx)("div",{className:"phase-dot ".concat(t<n?"completed":t===n?"active":""),title:k[e]},e)}),(0,r.jsx)("span",{className:"phase-label",children:k[e]})]})},n.prototype.renderMessages=function(){var e=this.state.messages;return(0,r.jsxs)("div",{className:"why-detector-chat",children:[e.map(function(e){return(0,r.jsxs)("div",{className:"chat-message ".concat(e.sender),children:[(0,r.jsxs)("div",{className:"message-header",children:[(0,r.jsx)("span",{className:"message-sender",children:"user"===e.sender?"You":"Coach"}),(0,r.jsx)("span",{className:"message-time",children:(n=e.timestamp,new Date(n).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))})]}),(0,r.jsx)("div",{className:"message-bubble ".concat(e.isStreaming?"message-streaming":""),children:(0,r.jsx)(a.oz,{remarkPlugins:[i.A],children:e.content})})]},e.id);var n}),(0,r.jsx)("div",{ref:this.chatEndRef})]})},n.prototype.renderInput=function(){var e=this,n=this.state,t=n.inputText,o=n.isLoading,s=n.isStreaming;return(0,r.jsxs)("div",{className:"why-detector-input",children:[(0,r.jsx)("div",{className:"input-wrapper",children:(0,r.jsx)("textarea",{ref:this.inputRef,className:"input-textarea",value:t,onChange:function(n){return e.setState({inputText:n.target.value})},onKeyPress:this.handleKeyPress,placeholder:"Share your thoughts...",disabled:o,rows:1})}),s?(0,r.jsx)("button",{className:"stop-btn",onClick:this.handleStopGeneration,children:"‚¨õ"}):(0,r.jsx)("button",{className:"send-btn",onClick:this.handleSendMessage,disabled:!t.trim()||o,children:"‚û§"})]})},n.prototype.render=function(){var e=this.state,n=e.currentTheme,t=e.isInitializing,o=e.error,s=e.sessionStarted;return(0,r.jsxs)("div",{className:"why-detector ".concat("dark"===n?"dark-theme":""),children:[o&&(0,r.jsxs)("div",{className:"error-banner",children:[(0,r.jsxs)("span",{children:["‚ö†Ô∏è ",o]}),(0,r.jsx)("button",{className:"error-dismiss",onClick:this.dismissError,children:"√ó"})]}),t?(0,r.jsxs)("div",{className:"loading-container",children:[(0,r.jsx)("div",{className:"loading-spinner"}),(0,r.jsx)("p",{children:"Initializing..."})]}):s?(0,r.jsxs)(r.Fragment,{children:[this.renderHeader(),this.renderMessages(),this.renderInput()]}):this.renderWelcomeScreen()]})},n}(o.Component);const B=U,Y=U;var F={name:"BrainDriveWhyDetector",version:"1.0.0",description:"Find Your Why - Multi-agent coaching flow to discover your core purpose"}},423:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(601),o=t.n(r),s=t(314),a=t.n(s)()(o());a.push([e.id,"/**\n * BrainDriveWhyDetector Styles\n * Follows BrainDrive color scheme\n */\n\n/* CSS Variables - Light Theme */\n.why-detector {\n  --bg-primary: #ffffff;\n  --bg-secondary: #f9fafb;\n  --text-primary: #333333;\n  --text-secondary: #6b7280;\n  --text-muted: #9ca3af;\n  --border-color: rgba(0, 0, 0, 0.1);\n  --hover-color: rgba(0, 0, 0, 0.05);\n  --accent-color: #2196f3;\n  --accent-hover: #1976d2;\n  --success-color: #4caf50;\n  --error-color: #f44336;\n  --warning-color: #ff9800;\n  \n  --coach-bg: rgba(33, 150, 243, 0.08);\n  --coach-border: rgba(33, 150, 243, 0.2);\n  --user-bg: #f3f4f6;\n  --user-border: rgba(0, 0, 0, 0.1);\n  --system-bg: #fef3c7;\n  --system-border: #fcd34d;\n}\n\n/* Dark Theme */\n.why-detector.dark-theme {\n  --bg-primary: #121a28;\n  --bg-secondary: #1a2332;\n  --text-primary: #e0e0e0;\n  --text-secondary: #9ca3af;\n  --text-muted: #6b7280;\n  --border-color: rgba(255, 255, 255, 0.1);\n  --hover-color: rgba(255, 255, 255, 0.05);\n  \n  --coach-bg: rgba(255, 255, 255, 0.04);\n  --coach-border: rgba(255, 255, 255, 0.08);\n  --user-bg: rgba(33, 150, 243, 0.2);\n  --user-border: rgba(33, 150, 243, 0.35);\n  --system-bg: rgba(255, 152, 0, 0.15);\n  --system-border: rgba(255, 152, 0, 0.3);\n}\n\n/* Base Container */\n.why-detector {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  min-height: 400px;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n/* Header */\n.why-detector-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 16px;\n  border-bottom: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n  gap: 12px;\n  flex-wrap: wrap;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.header-title {\n  font-size: 16px;\n  font-weight: 600;\n  color: var(--text-primary);\n}\n\n.header-right {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n/* Model Selector */\n.model-selector {\n  position: relative;\n}\n\n.model-selector-btn {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 8px 12px;\n  background: var(--hover-color);\n  border: 1px solid var(--border-color);\n  border-radius: 6px;\n  color: var(--text-primary);\n  font-size: 13px;\n  cursor: pointer;\n  min-width: 150px;\n  max-width: 220px;\n}\n\n.model-selector-btn:hover:not(:disabled) {\n  background: var(--border-color);\n}\n\n.model-selector-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.model-name {\n  flex: 1;\n  text-align: left;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.model-dropdown {\n  position: absolute;\n  top: 100%;\n  right: 0;\n  margin-top: 4px;\n  min-width: 250px;\n  max-height: 300px;\n  overflow-y: auto;\n  background: var(--bg-primary);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);\n  z-index: 100;\n}\n\n.model-option {\n  padding: 10px 14px;\n  cursor: pointer;\n  transition: background 0.15s;\n}\n\n.model-option:hover {\n  background: var(--hover-color);\n}\n\n.model-option.selected {\n  background: rgba(33, 150, 243, 0.1);\n}\n\n.model-option-name {\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.model-option-server {\n  font-size: 11px;\n  color: var(--text-muted);\n  margin-top: 2px;\n}\n\n/* Phase Indicator */\n.phase-indicator {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  flex-wrap: wrap;\n}\n\n.phase-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: var(--border-color);\n  transition: all 0.2s;\n}\n\n.phase-dot.active {\n  width: 24px;\n  border-radius: 4px;\n  background: var(--accent-color);\n}\n\n.phase-dot.completed {\n  background: var(--success-color);\n}\n\n.phase-label {\n  font-size: 12px;\n  color: var(--text-secondary);\n  margin-left: 8px;\n}\n\n/* Chat Area */\n.why-detector-chat {\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n/* Messages */\n.chat-message {\n  display: flex;\n  flex-direction: column;\n  max-width: 85%;\n  animation: fadeIn 0.3s ease;\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; transform: translateY(10px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.chat-message.user {\n  align-self: flex-end;\n}\n\n.chat-message.coach {\n  align-self: flex-start;\n}\n\n.message-header {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  margin-bottom: 4px;\n  font-size: 12px;\n  color: var(--text-muted);\n}\n\n.message-sender {\n  font-weight: 600;\n  color: var(--text-secondary);\n}\n\n.message-bubble {\n  padding: 12px 16px;\n  border-radius: 12px;\n  font-size: 14px;\n  line-height: 1.6;\n  word-wrap: break-word;\n}\n\n.chat-message.user .message-bubble {\n  background: var(--user-bg);\n  border: 1px solid var(--user-border);\n  border-bottom-right-radius: 4px;\n}\n\n.chat-message.coach .message-bubble {\n  background: var(--coach-bg);\n  border: 1px solid var(--coach-border);\n  border-bottom-left-radius: 4px;\n}\n\n.message-streaming::after {\n  content: '‚ñã';\n  animation: blink 1s infinite;\n}\n\n@keyframes blink {\n  0%, 50% { opacity: 1; }\n  51%, 100% { opacity: 0; }\n}\n\n/* Markdown in messages */\n.message-bubble p { margin: 0 0 8px 0; }\n.message-bubble p:last-child { margin-bottom: 0; }\n.message-bubble strong { font-weight: 600; }\n.message-bubble em { font-style: italic; }\n.message-bubble ul, .message-bubble ol { margin: 8px 0; padding-left: 20px; }\n.message-bubble li { margin: 4px 0; }\n.message-bubble code {\n  background: rgba(0, 0, 0, 0.06);\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-family: ui-monospace, 'SF Mono', Menlo, monospace;\n  font-size: 13px;\n}\n.dark-theme .message-bubble code {\n  background: rgba(255, 255, 255, 0.08);\n}\n\n/* Input Area */\n.why-detector-input {\n  display: flex;\n  align-items: flex-end;\n  gap: 8px;\n  padding: 12px 16px;\n  border-top: 1px solid var(--border-color);\n  background: var(--bg-secondary);\n}\n\n.input-wrapper {\n  flex: 1;\n}\n\n.input-textarea {\n  width: 100%;\n  min-height: 44px;\n  max-height: 120px;\n  padding: 10px 14px;\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  background: var(--bg-primary);\n  color: var(--text-primary);\n  font-size: 14px;\n  font-family: inherit;\n  resize: none;\n  outline: none;\n}\n\n.input-textarea:focus {\n  border-color: var(--accent-color);\n}\n\n.input-textarea::placeholder {\n  color: var(--text-muted);\n}\n\n.send-btn, .stop-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 44px;\n  height: 44px;\n  border-radius: 8px;\n  border: none;\n  cursor: pointer;\n  transition: all 0.15s;\n}\n\n.send-btn {\n  background: var(--accent-color);\n  color: white;\n}\n\n.send-btn:hover:not(:disabled) {\n  background: var(--accent-hover);\n}\n\n.send-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.stop-btn {\n  background: var(--error-color);\n  color: white;\n}\n\n/* Welcome Screen */\n.welcome-screen {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  padding: 32px;\n}\n\n.welcome-content {\n  max-width: 500px;\n  text-align: center;\n}\n\n.welcome-icon {\n  font-size: 64px;\n  margin-bottom: 16px;\n}\n\n.welcome-content h2 {\n  font-size: 28px;\n  font-weight: 600;\n  margin: 0 0 8px 0;\n}\n\n.welcome-subtitle {\n  font-size: 16px;\n  color: var(--text-secondary);\n  margin: 0 0 24px 0;\n}\n\n.welcome-description {\n  text-align: left;\n  margin-bottom: 24px;\n}\n\n.welcome-description p {\n  font-size: 14px;\n  line-height: 1.6;\n  color: var(--text-secondary);\n  margin: 0 0 12px 0;\n}\n\n.welcome-disclaimer {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  padding: 12px 16px;\n  background: var(--system-bg);\n  border: 1px solid var(--system-border);\n  border-radius: 8px;\n  font-size: 13px;\n  text-align: left;\n  margin-bottom: 24px;\n}\n\n.welcome-warning {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  padding: 12px 16px;\n  background: rgba(255, 152, 0, 0.1);\n  border: 1px solid var(--warning-color);\n  border-radius: 8px;\n  font-size: 13px;\n  text-align: left;\n  margin-bottom: 16px;\n  color: #92400e;\n}\n\n.dark-theme .welcome-warning {\n  color: #fcd34d;\n}\n\n.welcome-error {\n  display: flex;\n  align-items: flex-start;\n  gap: 8px;\n  padding: 12px 16px;\n  background: rgba(244, 67, 54, 0.1);\n  border: 1px solid var(--error-color);\n  border-radius: 8px;\n  font-size: 13px;\n  text-align: left;\n  margin-bottom: 16px;\n  color: var(--error-color);\n}\n\n.start-btn {\n  padding: 14px 32px;\n  font-size: 16px;\n  font-weight: 600;\n  background: var(--accent-color);\n  color: white;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.15s;\n}\n\n.start-btn:hover:not(:disabled) {\n  background: var(--accent-hover);\n}\n\n.start-btn:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.welcome-time {\n  margin-top: 16px;\n  font-size: 13px;\n  color: var(--text-muted);\n}\n\n/* Loading */\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  gap: 16px;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 3px solid var(--border-color);\n  border-top-color: var(--accent-color);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  to { transform: rotate(360deg); }\n}\n\n/* Error */\n.error-banner {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 16px;\n  margin: 8px;\n  background: rgba(244, 67, 54, 0.1);\n  border: 1px solid var(--error-color);\n  border-radius: 8px;\n  color: var(--error-color);\n  font-size: 14px;\n}\n\n.error-dismiss {\n  margin-left: auto;\n  background: none;\n  border: none;\n  color: inherit;\n  cursor: pointer;\n  padding: 4px;\n  font-size: 16px;\n  opacity: 0.7;\n}\n\n.error-dismiss:hover {\n  opacity: 1;\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .why-detector-header {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .header-left, .header-right {\n    justify-content: center;\n  }\n  \n  .chat-message {\n    max-width: 95%;\n  }\n  \n  .welcome-content {\n    padding: 0 16px;\n  }\n}\n\n",""]);const i=a}}]);